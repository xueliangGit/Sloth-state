!function(n){var t=window.Sloth||{};t&&t.Model?t.Model.add(n):n()}(function(){var n=window.Sloth||{},t={config:{},current:{},_isnei:!1,setConfig:function(t){function i(n){for(var t=n.split("/"),i=[],a=0;a<t.length;a++)""!==t[a]&&i.push(t[a]);return i}function a(){var t=h,i=window.location.hash;n._log(c);var a=i.split("/");e.current.params={};for(var r=0;r<t.length;r++)e.params[t[r]]=a[r+1]||"",e.current.params[t[r]]=a[r+1]||""}function r(){a(),e._function.chang()}var o=typeof t,e=this;if("object"===o){var c=window.location.pathname,f=c;c=c.split("/"),c=c[c.length-1];var h,s=0;for(var l in t)e.config[l]={template:t[l].template||"",path:t[l].path||"/",paramFormat:t[l].param||"",param:i(t[l].param||"")},"/"!=e.config[l].path.charAt(e.config[l].path)&&(e.config[l].path=e.config[l].path+"/"),f.indexOf(e.config[l].path+e.config[l].template)>-1&&(s=1,e.config.$base_url=f.replace(t[l].path+t[l].template,""),h=e.config[l].param,e.current=e.config[l],a());0===s&&(""===c&&e.config["default"]?(h=e.config["default"].param,e.current=e.config["default"],a()):n._warn("本页面未设置参数传递！"))}else n._warn(new Error("使用state.setConfig函数去设置页面跳转需要 传入{}对象，而不是"+o));window.onhashchange=r},params:{},go:function(t,i,a){a=a||"go";var r=this.config[t];if(i=i||{},r){for(var o="",e=0;e<r.param.length;e++)o+="/"+("undefined"!=i[r.param[e]]?i[r.param[e]]:"");var c=this.config.$base_url+r.path+r.template+"#"+o;if("go"===a)window.location.href=c;else if("get"===a)return window.location.origin+c}else if(!this._isnei&&n._warn(new Error("您没有设置“"+t+"”这个相关的跳转配置项")),this._isnei)throw new Error("您没有设置“"+t+"”这个相关的跳转配置项");this._isnei=!1},nextpath:function(){},backViewUrl:function(){return document.referrer||""},goBack:function(){function t(){try{this._isnei=!0;for(var t=this.config.index.param,i={},a=0;a<t.length;a++)i[t[a]]=this.params[t[a]]||"";this.go("index",i)}catch(r){n._warn(r)}}if(""===this.backViewUrl())t.call(this);else{if(this.backViewUrl()===location.href)return;this.backViewUrl().indexOf(location.host)>0?window.history.back():t.call(this)}},_function:{chang:function(){return!1}},chang:function(n){this._function.chang=n}};return n.state=t,window.Sloth=n,t});